{"version":3,"sources":["../src/index.js"],"names":["PORT","app","server","http","createServer","use","exposedHeaders","bodyParser","json","limit","req","res","send","wss","on","connection","console","log","message","Date","listen","process","env"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAO,IAAb;AACA,IAAMC,MAAM,wBAAZ;AACAA,IAAIC,MAAJ,GAAaC,eAAKC,YAAL,CAAkBH,GAAlB,CAAb;;AAEAA,IAAII,GAAJ,CAAQ,sBAAO,KAAP,CAAR;;AAEAJ,IAAII,GAAJ,CAAQ,oBAAK;AACTC,oBAAe;AADN,CAAL,CAAR;;AAIAL,IAAII,GAAJ,CAAQE,qBAAWC,IAAX,CAAgB;AACpBC,WAAO;AADa,CAAhB,CAAR;;AAIA;;AAEAR,IAAII,GAAJ,CAAQ,UAACK,GAAD,EAAMC,GAAN,EAAa;AACjBA,QAAIC,IAAJ,CAAS,QAAT;AACH,CAFD;;AAIAX,IAAIY,GAAJ,GAAU,iBAAO;AACbX,YAAQD,IAAIC;;AADC,CAAP,CAAV;;AAKAD,IAAIY,GAAJ,CAAQC,EAAR,CAAW,YAAX,EAAyB,UAACC,UAAD,EAAe;AACpCC,YAAQC,GAAR,CAAY,sBAAZ;;AAEA;AACAF,eAAWD,EAAX,CAAc,SAAd,EAAyB,UAACI,OAAD,EAAY;AACjCH,mBAAWH,IAAX,CAAgBM,UAAS,GAAT,GAAc,IAAIC,IAAJ,EAA9B;AAGH,KAJD;AAKH,CATD;;AAWAlB,IAAIC,MAAJ,CAAWkB,MAAX,CAAkBC,QAAQC,GAAR,CAAYtB,IAAZ,IAAoBA,IAAtC,EAA4C,YAAK;AAC7CgB,YAAQC,GAAR,CAAY,qDAAZ;AACH,CAFD;;kBAIehB,G","file":"index.js","sourcesContent":["import http from 'http';\r\nimport express from 'express';\r\nimport cors from 'cors';\r\nimport morgan from 'morgan';\r\nimport bodyParser from 'body-parser';\r\nimport WebSocketServer, {Server} from 'uws';\r\n\r\nconst PORT = 3000;\r\nconst app = express();\r\napp.server = http.createServer(app);\r\n\r\napp.use(morgan('dev'));\r\n\r\napp.use(cors({\r\n    exposedHeaders:\"*\"\r\n}));\r\n\r\napp.use(bodyParser.json({\r\n    limit: '50mb'\r\n}));\r\n\r\n//app.set('root', __dirname);\r\n\r\napp.use((req, res) =>{\r\n    res.send(\"Hello!\")\r\n});\r\n\r\napp.wss = Server({\r\n    server: app.server\r\n\r\n});\r\n\r\napp.wss.on('connection', (connection) =>{\r\n    console.log(\"New client connected\");\r\n\r\n    //listen event new message from user.\r\n    connection.on('message', (message) =>{\r\n        connection.send(message +\" \"+ new Date());\r\n\r\n\r\n    });\r\n});\r\n\r\napp.server.listen(process.env.PORT || PORT, () =>{\r\n    console.log('App is running on port $(app.server.address().port)');\r\n});\r\n\r\nexport default app;"]}